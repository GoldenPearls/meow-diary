<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${title}">ëƒ¥ì´ì™€ì˜ ì¼ì¼ ê¸°ë¡ - MeowDiary</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="/css/style.css" rel="stylesheet" />
  </head>
  <body>
    <div th:replace="~{layout :: content}">
      <!-- í—¤ë” ì„¹ì…˜ -->
      <div class="hero-section text-center py-5">
        <div class="container">
          <h1 class="display-4 mb-4">
            <i class="fas fa-calendar-heart text-primary"></i>
            ëƒ¥ì´ì™€ì˜ ì¼ì¼ ê¸°ë¡
          </h1>
          <p class="lead text-muted">
            ë§¤ì¼ë§¤ì¼ ëƒ¥ì´ì™€ í•¨ê»˜í•œ íŠ¹ë³„í•œ ìˆœê°„ë“¤ì„ ê¸°ë¡í•´ë³´ì„¸ìš”
          </p>
        </div>
      </div>

      <!-- ë©”ì¸ ì½˜í…ì¸  -->
      <div class="container mt-4">
        <!-- ê³ ì–‘ì´ ì„ íƒ -->
        <div class="row mb-4">
          <div class="col-md-6">
            <label for="catSelect" class="form-label">
              <i class="fas fa-cat"></i> ê³ ì–‘ì´ ì„ íƒ
            </label>
            <select class="form-select" id="catSelect">
              <option value="">ê³ ì–‘ì´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
              <option value="1">ë£¨ì‹œ (ëŸ¬ì‹œì•ˆë¸”ë£¨)</option>
              <option value="2">ë¯¸ë¯¸ (í˜ë¥´ì‹œì•ˆ)</option>
              <option value="3">ë‚˜ë¹„ (ì½”ë¦¬ì•ˆìˆí—¤ì–´)</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="recordDate" class="form-label">
              <i class="fas fa-calendar"></i> ê¸°ë¡ ë‚ ì§œ
            </label>
            <input type="date" class="form-control" id="recordDate" value="" />
          </div>
        </div>

        <!-- ìƒˆ ê¸°ë¡ ì¶”ê°€ ë²„íŠ¼ -->
        <div class="row mb-4">
          <div class="col-12">
            <button
              class="btn btn-primary btn-lg"
              data-bs-toggle="modal"
              data-bs-target="#addRecordModal"
            >
              <i class="fas fa-plus"></i> ìƒˆ ê¸°ë¡ ì¶”ê°€
            </button>
          </div>
        </div>

        <!-- ê¸°ë¡ ëª©ë¡ -->
        <div class="row" id="recordsList">
          <!-- ê¸°ë¡ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ê¸°ë¡ì´ ì—†ì„ ë•Œ -->
        <div
          class="text-center py-5"
          id="noRecordsMessage"
          style="display: none"
        >
          <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
          <h4 class="text-muted">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´ìš”</h4>
          <p class="text-muted">ì²« ë²ˆì§¸ ê¸°ë¡ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
        </div>
      </div>

      <!-- ìƒˆ ê¸°ë¡ ì¶”ê°€ ëª¨ë‹¬ -->
      <div class="modal fade" id="addRecordModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">
                <i class="fas fa-calendar-plus"></i> ìƒˆ ì¼ì¼ ê¸°ë¡
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              <form id="addRecordForm">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="recordTitle" class="form-label">ì œëª© *</label>
                    <input
                      type="text"
                      class="form-control"
                      id="recordTitle"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="recordMood" class="form-label">ëƒ¥ì´ ê¸°ë¶„</label>
                    <select class="form-select" id="recordMood">
                      <option value="">ê¸°ë¶„ ì„ íƒ</option>
                      <option value="VERY_HAPPY">ë§¤ìš° í–‰ë³µí•´ìš” ğŸ˜Š</option>
                      <option value="HAPPY">í–‰ë³µí•´ìš” ğŸ˜¸</option>
                      <option value="NORMAL">ë³´í†µì´ì—ìš” ğŸ˜º</option>
                      <option value="SAD">ìŠ¬í¼ìš” ğŸ˜¿</option>
                      <option value="ANGRY">í™”ë‚˜ìš” ğŸ˜¾</option>
                      <option value="EXCITED">ì‹ ë‚˜ìš” ğŸ˜¸</option>
                      <option value="CALM">ì°¨ë¶„í•´ìš” ğŸ˜Œ</option>
                      <option value="PLAYFUL">ì¥ë‚œê¾¸ëŸ¬ê¸° ğŸ˜º</option>
                      <option value="SLEEPY">ì¡¸ë ¤ìš” ğŸ˜´</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="recordActivity" class="form-label">í™œë™</label>
                    <select class="form-select" id="recordActivity">
                      <option value="">í™œë™ ì„ íƒ</option>
                      <option value="PLAYING">ë†€ê¸° ğŸ¾</option>
                      <option value="SLEEPING">ì ìê¸° ğŸ˜´</option>
                      <option value="EATING">ë°¥ ë¨¹ê¸° ğŸ½ï¸</option>
                      <option value="GROOMING">ê·¸ë£¨ë° ğŸ›</option>
                      <option value="EXPLORING">íƒí—˜í•˜ê¸° ğŸ”</option>
                      <option value="CUDDLING">ìŠ¤í‚¨ì‹­ ğŸ’•</option>
                      <option value="TRAINING">í›ˆë ¨ ğŸ¯</option>
                      <option value="VET_VISIT">ë³‘ì› ğŸ¥</option>
                      <option value="OUTDOOR_TIME">ì™¸ì¶œ ğŸŒ³</option>
                      <option value="RESTING">íœ´ì‹ ğŸ˜Œ</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="recordWeather" class="form-label">ë‚ ì”¨</label>
                    <input
                      type="text"
                      class="form-control"
                      id="recordWeather"
                      placeholder="ë§‘ìŒ, íë¦¼, ë¹„ ë“±"
                    />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="recordContent" class="form-label"
                    >ì˜¤ëŠ˜ì˜ ì´ì•¼ê¸°</label
                  >
                  <textarea
                    class="form-control"
                    id="recordContent"
                    rows="4"
                    placeholder="ì˜¤ëŠ˜ ëƒ¥ì´ì™€ í•¨ê»˜í•œ íŠ¹ë³„í•œ ìˆœê°„ë“¤ì„ ê¸°ë¡í•´ë³´ì„¸ìš”..."
                  ></textarea>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="recordTemperature" class="form-label"
                      >ê¸°ì˜¨ (Â°C)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="recordTemperature"
                      step="0.1"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="recordTags" class="form-label">íƒœê·¸</label>
                    <input
                      type="text"
                      class="form-control"
                      id="recordTags"
                      placeholder="ì‰¼í‘œë¡œ êµ¬ë¶„ (ì˜ˆ: íŠ¹ë³„í•œë‚ , ì¥ë‚œê°, ì‚°ì±…)"
                    />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="recordSpecialNotes" class="form-label"
                    >íŠ¹ë³„ ë©”ëª¨</label
                  >
                  <textarea
                    class="form-control"
                    id="recordSpecialNotes"
                    rows="2"
                    placeholder="íŠ¹ë³„íˆ ê¸°ë¡í•˜ê³  ì‹¶ì€ ë‚´ìš©ì´ ìˆë‹¤ë©´..."
                  ></textarea>
                </div>
                <div class="mb-3">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="recordImportant"
                    />
                    <label class="form-check-label" for="recordImportant">
                      <i class="fas fa-star text-warning"></i> ì¤‘ìš”í•œ ê¸°ë¡ìœ¼ë¡œ
                      í‘œì‹œ
                    </label>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="recordImages" class="form-label">
                    <i class="fas fa-camera"></i> ì‚¬ì§„ ì¶”ê°€
                  </label>
                  <input
                    type="file"
                    class="form-control"
                    id="recordImages"
                    multiple
                    accept="image/*"
                  />
                  <div class="form-text">
                    ì—¬ëŸ¬ ì¥ì˜ ì‚¬ì§„ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                ì·¨ì†Œ
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="saveRecord()"
              >
                <i class="fas fa-save"></i> ê¸°ë¡ ì €ì¥
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ê¸°ë¡ ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ -->
      <div class="modal fade" id="recordDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">
                <i class="fas fa-calendar-check"></i> ê¸°ë¡ ìƒì„¸ë³´ê¸°
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body" id="recordDetailContent">
              <!-- ê¸°ë¡ ìƒì„¸ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                ë‹«ê¸°
              </button>
              <button
                type="button"
                class="btn btn-warning"
                onclick="editRecord()"
              >
                <i class="fas fa-edit"></i> ìˆ˜ì •
              </button>
              <button
                type="button"
                class="btn btn-danger"
                onclick="deleteRecord()"
              >
                <i class="fas fa-trash"></i> ì‚­ì œ
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/app.js"></script>
    <script>
      // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
      document.getElementById("recordDate").value = new Date()
        .toISOString()
        .split("T")[0];

      // ìƒ˜í”Œ ë°ì´í„°
      let dailyRecords = [
        {
          id: 1,
          catId: 1,
          catName: "ë£¨ì‹œ",
          recordDate: "2025-07-27",
          title: "ì˜¤ëŠ˜ì€ ì •ë§ í–‰ë³µí•œ í•˜ë£¨ì˜€ì–´ìš”",
          content:
            "ë£¨ì‹œê°€ ì˜¤ëŠ˜ì€ ì •ë§ í™œë°œí•˜ê²Œ ë†€ì•˜ì–´ìš”. ìƒˆ ì¥ë‚œê°ì„ ì‚¬ì¤¬ëŠ”ë° ë„ˆë¬´ ì¢‹ì•„í•˜ë„¤ìš”!",
          mood: "VERY_HAPPY",
          activityType: "PLAYING",
          weather: "ë§‘ìŒ",
          temperature: 25.5,
          specialNotes: "ìƒˆ ì¥ë‚œê° êµ¬ë§¤ - ë£¨ì‹œê°€ ì •ë§ ì¢‹ì•„í•¨",
          isImportant: true,
          tags: "ì¥ë‚œê°,í–‰ë³µí•œë‚ ,ìƒˆê²ƒ",
          imageUrls: ["/images/cat1.jpg", "/images/cat2.jpg"],
        },
        {
          id: 2,
          catId: 1,
          catName: "ë£¨ì‹œ",
          recordDate: "2025-07-26",
          title: "í‘¹ ì” ë£¨ì‹œ",
          content:
            "ì˜¤ëŠ˜ì€ í•˜ë£¨ ì¢…ì¼ í‘¹ ì¤ì–´ìš”. ì•„ë§ˆ ì–´ì œ ë„ˆë¬´ ë†€ì•„ì„œ í”¼ê³¤í•œ ê²ƒ ê°™ì•„ìš”.",
          mood: "SLEEPY",
          activityType: "SLEEPING",
          weather: "íë¦¼",
          temperature: 22.0,
          specialNotes: "í‰ì†Œë³´ë‹¤ ë§ì´ ì ",
          isImportant: false,
          tags: "ì ,íœ´ì‹",
          imageUrls: [],
        },
      ];

      // ê¸°ë¡ ëª©ë¡ ë Œë”ë§
      function renderRecords() {
        const recordsList = document.getElementById("recordsList");
        const noRecordsMessage = document.getElementById("noRecordsMessage");
        const selectedCat = document.getElementById("catSelect").value;
        const selectedDate = document.getElementById("recordDate").value;

        let filteredRecords = dailyRecords;

        // ê³ ì–‘ì´ í•„í„°ë§
        if (selectedCat) {
          filteredRecords = filteredRecords.filter(
            (record) => record.catId == selectedCat
          );
        }

        // ë‚ ì§œ í•„í„°ë§
        if (selectedDate) {
          filteredRecords = filteredRecords.filter(
            (record) => record.recordDate === selectedDate
          );
        }

        if (filteredRecords.length === 0) {
          recordsList.innerHTML = "";
          noRecordsMessage.style.display = "block";
          return;
        }

        noRecordsMessage.style.display = "none";
        recordsList.innerHTML = filteredRecords
          .map(
            (record) => `
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 record-card ${
                      record.isImportant ? "border-warning" : ""
                    }" onclick="viewRecordDetail(${record.id})">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="card-title mb-0">${record.title}</h6>
                                ${
                                  record.isImportant
                                    ? '<i class="fas fa-star text-warning"></i>'
                                    : ""
                                }
                            </div>
                            <p class="card-text text-muted small">${
                              record.recordDate
                            }</p>
                            <p class="card-text">${record.content.substring(
                              0,
                              100
                            )}${record.content.length > 100 ? "..." : ""}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="badge bg-primary">${
                                  record.catName
                                }</span>
                                <div class="mood-indicator">
                                    ${getMoodIcon(record.mood)}
                                </div>
                            </div>
                            ${
                              record.imageUrls.length > 0
                                ? `
                                <div class="mt-2">
                                    <i class="fas fa-camera text-muted"></i>
                                    <small class="text-muted">${record.imageUrls.length}ì¥ì˜ ì‚¬ì§„</small>
                                </div>
                            `
                                : ""
                            }
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // ê¸°ë¶„ ì•„ì´ì½˜ ë°˜í™˜
      function getMoodIcon(mood) {
        const moodIcons = {
          VERY_HAPPY: "ğŸ˜Š",
          HAPPY: "ğŸ˜¸",
          NORMAL: "ğŸ˜º",
          SAD: "ğŸ˜¿",
          ANGRY: "ğŸ˜¾",
          EXCITED: "ğŸ˜¸",
          CALM: "ğŸ˜Œ",
          PLAYFUL: "ğŸ˜º",
          SLEEPY: "ğŸ˜´",
        };
        return moodIcons[mood] || "ğŸ˜º";
      }

      // ê¸°ë¡ ì €ì¥
      function saveRecord() {
        const formData = {
          catId: document.getElementById("catSelect").value,
          recordDate: document.getElementById("recordDate").value,
          title: document.getElementById("recordTitle").value,
          content: document.getElementById("recordContent").value,
          mood: document.getElementById("recordMood").value,
          activityType: document.getElementById("recordActivity").value,
          weather: document.getElementById("recordWeather").value,
          temperature:
            parseFloat(document.getElementById("recordTemperature").value) ||
            null,
          specialNotes: document.getElementById("recordSpecialNotes").value,
          isImportant: document.getElementById("recordImportant").checked,
          tags: document.getElementById("recordTags").value,
        };

        // ìœ íš¨ì„± ê²€ì‚¬
        if (!formData.catId) {
          showToast("ê³ ì–‘ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.", "warning");
          return;
        }
        if (!formData.title) {
          showToast("ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "warning");
          return;
        }

        // ìƒˆ ê¸°ë¡ ì¶”ê°€ (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
        const newRecord = {
          id: dailyRecords.length + 1,
          catId: parseInt(formData.catId),
          catName: document
            .getElementById("catSelect")
            .options[
              document.getElementById("catSelect").selectedIndex
            ].text.split(" ")[0],
          recordDate: formData.recordDate,
          title: formData.title,
          content: formData.content,
          mood: formData.mood,
          activityType: formData.activityType,
          weather: formData.weather,
          temperature: formData.temperature,
          specialNotes: formData.specialNotes,
          isImportant: formData.isImportant,
          tags: formData.tags,
          imageUrls: [],
        };

        dailyRecords.unshift(newRecord);
        renderRecords();

        // ëª¨ë‹¬ ë‹«ê¸°
        const modal = bootstrap.Modal.getInstance(
          document.getElementById("addRecordModal")
        );
        modal.hide();

        // í¼ ì´ˆê¸°í™”
        document.getElementById("addRecordForm").reset();
        document.getElementById("recordDate").value = new Date()
          .toISOString()
          .split("T")[0];

        showToast("ê¸°ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
      }

      // ê¸°ë¡ ìƒì„¸ ë³´ê¸°
      function viewRecordDetail(recordId) {
        const record = dailyRecords.find((r) => r.id === recordId);
        if (!record) return;

        const detailContent = document.getElementById("recordDetailContent");
        detailContent.innerHTML = `
                <div class="row">
                    <div class="col-md-8">
                        <h5>${record.title}</h5>
                        <p class="text-muted">${record.recordDate} - ${
          record.catName
        }</p>
                        <p>${record.content}</p>
                        ${
                          record.specialNotes
                            ? `<p><strong>íŠ¹ë³„ ë©”ëª¨:</strong> ${record.specialNotes}</p>`
                            : ""
                        }
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h6>ê¸°ë¡ ì •ë³´</h6>
                                <p><strong>ê¸°ë¶„:</strong> ${getMoodIcon(
                                  record.mood
                                )} ${getMoodText(record.mood)}</p>
                                <p><strong>í™œë™:</strong> ${getActivityText(
                                  record.activityType
                                )}</p>
                                ${
                                  record.weather
                                    ? `<p><strong>ë‚ ì”¨:</strong> ${record.weather}</p>`
                                    : ""
                                }
                                ${
                                  record.temperature
                                    ? `<p><strong>ê¸°ì˜¨:</strong> ${record.temperature}Â°C</p>`
                                    : ""
                                }
                                ${
                                  record.tags
                                    ? `<p><strong>íƒœê·¸:</strong> ${record.tags}</p>`
                                    : ""
                                }
                                ${
                                  record.isImportant
                                    ? '<p><strong><i class="fas fa-star text-warning"></i> ì¤‘ìš”í•œ ê¸°ë¡</strong></p>'
                                    : ""
                                }
                            </div>
                        </div>
                    </div>
                </div>
                ${
                  record.imageUrls.length > 0
                    ? `
                    <div class="mt-3">
                        <h6>ì‚¬ì§„</h6>
                        <div class="row">
                            ${record.imageUrls
                              .map(
                                (url) => `
                                <div class="col-md-4 mb-2">
                                    <img src="${url}" class="img-fluid rounded" alt="ê¸°ë¡ ì‚¬ì§„">
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `
                    : ""
                }
            `;

        // í˜„ì¬ ê¸°ë¡ IDë¥¼ ëª¨ë‹¬ì— ì €ì¥
        document
          .getElementById("recordDetailModal")
          .setAttribute("data-record-id", recordId);

        const modal = new bootstrap.Modal(
          document.getElementById("recordDetailModal")
        );
        modal.show();
      }

      // ê¸°ë¶„ í…ìŠ¤íŠ¸ ë°˜í™˜
      function getMoodText(mood) {
        const moodTexts = {
          VERY_HAPPY: "ë§¤ìš° í–‰ë³µí•´ìš”",
          HAPPY: "í–‰ë³µí•´ìš”",
          NORMAL: "ë³´í†µì´ì—ìš”",
          SAD: "ìŠ¬í¼ìš”",
          ANGRY: "í™”ë‚˜ìš”",
          EXCITED: "ì‹ ë‚˜ìš”",
          CALM: "ì°¨ë¶„í•´ìš”",
          PLAYFUL: "ì¥ë‚œê¾¸ëŸ¬ê¸°",
          SLEEPY: "ì¡¸ë ¤ìš”",
        };
        return moodTexts[mood] || "ë³´í†µì´ì—ìš”";
      }

      // í™œë™ í…ìŠ¤íŠ¸ ë°˜í™˜
      function getActivityText(activity) {
        const activityTexts = {
          PLAYING: "ë†€ê¸°",
          SLEEPING: "ì ìê¸°",
          EATING: "ë°¥ ë¨¹ê¸°",
          GROOMING: "ê·¸ë£¨ë°",
          EXPLORING: "íƒí—˜í•˜ê¸°",
          CUDDLING: "ìŠ¤í‚¨ì‹­",
          TRAINING: "í›ˆë ¨",
          VET_VISIT: "ë³‘ì›",
          OUTDOOR_TIME: "ì™¸ì¶œ",
          RESTING: "íœ´ì‹",
        };
        return activityTexts[activity] || "ê¸°íƒ€";
      }

      // ê¸°ë¡ ìˆ˜ì •
      function editRecord() {
        const recordId = parseInt(
          document
            .getElementById("recordDetailModal")
            .getAttribute("data-record-id")
        );
        const record = dailyRecords.find((r) => r.id === recordId);
        if (!record) return;

        // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
        document.getElementById("catSelect").value = record.catId;
        document.getElementById("recordDate").value = record.recordDate;
        document.getElementById("recordTitle").value = record.title;
        document.getElementById("recordContent").value = record.content;
        document.getElementById("recordMood").value = record.mood;
        document.getElementById("recordActivity").value = record.activityType;
        document.getElementById("recordWeather").value = record.weather || "";
        document.getElementById("recordTemperature").value =
          record.temperature || "";
        document.getElementById("recordSpecialNotes").value =
          record.specialNotes || "";
        document.getElementById("recordImportant").checked = record.isImportant;
        document.getElementById("recordTags").value = record.tags || "";

        // ëª¨ë‹¬ ë‹«ê¸°
        const detailModal = bootstrap.Modal.getInstance(
          document.getElementById("recordDetailModal")
        );
        detailModal.hide();

        // í¸ì§‘ ëª¨ë‹¬ ì—´ê¸°
        const addModal = new bootstrap.Modal(
          document.getElementById("addRecordModal")
        );
        addModal.show();

        showToast("ê¸°ë¡ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "info");
      }

      // ê¸°ë¡ ì‚­ì œ
      function deleteRecord() {
        const recordId = parseInt(
          document
            .getElementById("recordDetailModal")
            .getAttribute("data-record-id")
        );

        if (confirm("ì •ë§ë¡œ ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          dailyRecords = dailyRecords.filter((r) => r.id !== recordId);
          renderRecords();

          const modal = bootstrap.Modal.getInstance(
            document.getElementById("recordDetailModal")
          );
          modal.hide();

          showToast("ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.", "success");
        }
      }

      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      document.addEventListener("DOMContentLoaded", function () {
        renderRecords();

        // ê³ ì–‘ì´ ì„ íƒ ë³€ê²½ ì‹œ
        document
          .getElementById("catSelect")
          .addEventListener("change", renderRecords);

        // ë‚ ì§œ ë³€ê²½ ì‹œ
        document
          .getElementById("recordDate")
          .addEventListener("change", renderRecords);
      });
    </script>
  </body>
</html>
